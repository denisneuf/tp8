{extend name="admin/layout" /}

{block name="content"}

    <h2>Listado de Menús</h2>
    <a href="{:url('menu_create')}" class="btn btn-success mb-3">Crear Menu</a>

    {if isset($success)}<div class="alert alert-success">{$success}</div>{/if}
    {if isset($error)}<div class="alert alert-danger">{$error}</div>{/if}

    <table class="table table-bordered table-hover">
        <thead class="table-light">
            <tr>
                <th>ID</th>
                <th>Título</th>
                <th>URL</th>
                <th>Visible</th>
                <th>Orden</th>
                <th>Columnas</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            {foreach $menus as $menu}
            <tr>
                <td>{$menu.id}</td>
                <td>{$menu.title}</td>
                <td>{$menu.url}</td>
                <td>{if $menu.visible}✔️{/if}</td>
                <td>{$menu.order}</td>
                <td>
                    <ul class="list-unstyled">
                        {foreach $menu.columns as $column}
                        <li>
                            <strong>{$column.title}</strong>
                            <ul>
                                {foreach $column.links as $link}
                                <li><a href="{$link.url}" target="_blank">{$link.title}</a></li>
                                {/foreach}
                            </ul>
                        </li>
                        {/foreach}
                    </ul>
                </td>
                <td>
                    <a href="{:url('menu_edit', ['id' => $menu.id])}" class="btn btn-sm btn-primary">Editar</a>
                    <form action="{:url('menu_delete', ['id' => $menu.id])}" method="post" class="d-inline">
                        <input type="hidden" name="__token__" value="{:token()}">
                        <button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('¿Eliminar este menú?')">Eliminar</button>
                    </form>
                    {if $menu.delete_time}
                    <form action="{:url('menu_restore', ['id' => $menu.id])}" method="post" class="d-inline">
                        <input type="hidden" name="__token__" value="{:token()}">
                        <button type="submit" class="btn btn-sm btn-warning">Restaurar</button>
                    </form>
                    {/if}
                </td>
            </tr>
            {/foreach}
        </tbody>
    </table>

   {$pagination}



{/block}
